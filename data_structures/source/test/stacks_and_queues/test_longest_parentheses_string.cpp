//
// Created by andreas on 03.07.23.
//
#include "stacks_and_queues/longest_valid_parentheses_string.h"
#include "gtest/gtest.h"

TEST(LongestValidParentheses, simple_first)
{
	std::string input{"(()"};
	constexpr int expected_result{2};
	EXPECT_EQ(longest_valid_parentheses_string(input), expected_result);
}

TEST(LongestValidParentheses, simple_second)
{
	std::string input{")()())"};
	constexpr int expected_result{4};
	EXPECT_EQ(longest_valid_parentheses_string(input), expected_result);
}


TEST(LongestValidParentheses, simple_third)
{
	std::string input{""};
	constexpr int expected_result{0};
	EXPECT_EQ(longest_valid_parentheses_string(input), expected_result);
}

TEST(LongestValidParentheses, long_first)
{
	std::string input
		{")(()(()(((())(((((()()))((((()()(()()())())())()))()()()())(())()()(((()))))()((()))(((())()((()()())((())))(())))())((()())()()((()((())))))((()(((((()((()))(()()(())))((()))()))())"};
	constexpr int expected_result{132};
	EXPECT_EQ(longest_valid_parentheses_string(input), expected_result);
}

TEST(LongestValidParentheses, long_second)
{
	std::string input
		{"())()()(())((()(()()(((()))((((())((()(())()())(()((((()))()(()))(())()(())(()(((((())((((((()())())(()(()((())()))(()))))))()(()))((((())()()()))()()()(((()(()())(()()(()(()()(((()))))))()()))())())((()()))))))((()))(((()((())()(()()))((())))()()())))))))()))))(()))))()))()))()((())))((()))(()))))))(((()))))))))()(()()()(())((())()))()()(())))()()))(()())()))(((()())()))((())((((()))(()(()(()()()(((())()(((((()))((()(((((())(()()))((((((((()(()(()(()(())))(())(()())())(()((((()(())((()(())))(())))()(((((()(()()(())))))))())(())(())(()()(((())))((()))(((((()))))())))()((()))()))))())))))((())(((((()()))((((())))(((()(()(())())(((()(()(()()()())))())()))((()((())())()()()(((())(((((()((((((()((()())))((((())((()(((((((()(()((()()()(()(()())(()(()()((((())))()(((()())))(()()))()(()()()()(((((())(()))))((()))())))()((((((()))())))()(()))(())))((((()())(((((()()())(((((())(()())(()))))()(()()))()))))))())))(((())(()(()()))(()))()(((())))())((((()(((()))))))()(()(()))()()(()()))))))))((()))))))(())((()((()))()))((((((()())))))(()((())((((()))))(()(()()()()(()))()()(()(()))(()()(((((((()())(())(()())((())())()(()())((())()())())(()())))())))(())())())(())((()())(((()()))()))()()))()(()(())((((((((())))()((())((()((((((((((()))))(()(((((())(()(()())())))((())())))))()))(()((()()))((()((())()()()((()(())())((())())(()()(((())))))())()()(()))()())(()(()((())))((((()()(())))())(())(()(()(())())())(()()())()(())())))(()()(((())))((()()(((())()()(()())((((()()(()())(()((((()(()()(()(()(((()((()())(()()))(()((((()(((((()))))()()))(((()((((((()(()()()()())()))(()(())))))((()(((()())())))(((()()))(()(()(((((((()()))(()(())))())()(())())(())(()))(())(()))()()(()()())))))()))()((())(((()((((((((())()()))())))((()())("};
	constexpr int expected_result{310};
	EXPECT_EQ(longest_valid_parentheses_string(input), expected_result);
}


TEST(LongestValidParentheses, simple_first_optimized)
{
	std::string input{"(()"};
	constexpr int expected_result{2};
	EXPECT_EQ(longest_valid_parentheses_string_optimized(input), expected_result);
}

TEST(LongestValidParentheses, simple_second_optimized)
{
	std::string input{")()())"};
	constexpr int expected_result{4};
	EXPECT_EQ(longest_valid_parentheses_string_optimized(input), expected_result);
}


TEST(LongestValidParentheses, simple_third_optimized)
{
	std::string input{""};
	constexpr int expected_result{0};
	EXPECT_EQ(longest_valid_parentheses_string_optimized(input), expected_result);
}

TEST(LongestValidParentheses, long_first_optimized)
{
	std::string input
		{")(()(()(((())(((((()()))((((()()(()()())())())()))()()()())(())()()(((()))))()((()))(((())()((()()())((())))(())))())((()())()()((()((())))))((()(((((()((()))(()()(())))((()))()))())"};
	constexpr int expected_result{132};
	EXPECT_EQ(longest_valid_parentheses_string_optimized(input), expected_result);
}

TEST(LongestValidParentheses, long_second_optimized)
{
	std::string input
		{"())()()(())((()(()()(((()))((((())((()(())()())(()((((()))()(()))(())()(())(()(((((())((((((()())())(()(()((())()))(()))))))()(()))((((())()()()))()()()(((()(()())(()()(()(()()(((()))))))()()))())())((()()))))))((()))(((()((())()(()()))((())))()()())))))))()))))(()))))()))()))()((())))((()))(()))))))(((()))))))))()(()()()(())((())()))()()(())))()()))(()())()))(((()())()))((())((((()))(()(()(()()()(((())()(((((()))((()(((((())(()()))((((((((()(()(()(()(())))(())(()())())(()((((()(())((()(())))(())))()(((((()(()()(())))))))())(())(())(()()(((())))((()))(((((()))))())))()((()))()))))())))))((())(((((()()))((((())))(((()(()(())())(((()(()(()()()())))())()))((()((())())()()()(((())(((((()((((((()((()())))((((())((()(((((((()(()((()()()(()(()())(()(()()((((())))()(((()())))(()()))()(()()()()(((((())(()))))((()))())))()((((((()))())))()(()))(())))((((()())(((((()()())(((((())(()())(()))))()(()()))()))))))())))(((())(()(()()))(()))()(((())))())((((()(((()))))))()(()(()))()()(()()))))))))((()))))))(())((()((()))()))((((((()())))))(()((())((((()))))(()(()()()()(()))()()(()(()))(()()(((((((()())(())(()())((())())()(()())((())()())())(()())))())))(())())())(())((()())(((()()))()))()()))()(()(())((((((((())))()((())((()((((((((((()))))(()(((((())(()(()())())))((())())))))()))(()((()()))((()((())()()()((()(())())((())())(()()(((())))))())()()(()))()())(()(()((())))((((()()(())))())(())(()(()(())())())(()()())()(())())))(()()(((())))((()()(((())()()(()())((((()()(()())(()((((()(()()(()(()(((()((()())(()()))(()((((()(((((()))))()()))(((()((((((()(()()()()())()))(()(())))))((()(((()())())))(((()()))(()(()(((((((()()))(()(())))())()(())())(())(()))(())(()))()()(()()())))))()))()((())(((()((((((((())()()))())))((()())("};
	constexpr int expected_result{310};
	EXPECT_EQ(longest_valid_parentheses_string_optimized(input), expected_result);
}
